modelscript_version: 0.1
modelscript_primitives:
- name: IntersectionLeaderFollowerModel
  from_taxonomic_primitive: IntersectionLeaderFollower
    export_attributes_to_model: True
    instance_aliases:
      alias:
      - name: C
      - instances:
        - cp_lf_none
  scale_parameters:
  - name: clock
    type: real
    export_as_model_attribute: True
    inherit: True
  - name: technology
    type: string
    export_as_model_attribute: True
    inherit: True
  load_symbols:
  - port: md_in_leader
    level:
    - datatype:
      - load_rank: metadata_word_width
    - coordinate:
      - load_rank: dense_data_rank_size
      - load_rank: nodes_per_cycle
    - position:
      - load_rank: positions_per_cycle
    - bandwidth:
      - load_rank: metadata_read_width
    peak:
    - datatype:
      - load_rank: metadata_word_width
    - position:
      - load_rank: positions_per_cycle
    - bandwidth:
      - load_rank: metadata_read_width
  - port: md_out
    level:
    - datatype:
      - load_rank: metadata_word_width
    - coordinate:
      - load_rank: dense_data_rank_size
      - load_rank: nodes_per_cycle
    - position:
      - load_rank: positions_per_cycle
    - bandwidth:
      - load_rank: metadata_read_width
    peak:
    - datatype:
      - load_rank: metadata_word_width
    - position:
      - load_rank: positions_per_cycle
    - bandwidth:
      - load_rank: metadata_read_width
  actions:
  - name: fill
  - name: intersect
  - name: gated_fill
  - name: gated_intersect
  characterization_metric_models:
  - name: test_fxn
    approximation: poly
    table_id: accelergy/data/primitives_table.csv
    rtl_id_expression: BidirectionalCoordinatePayloadIntersectDecoupled_metaDataWidth$(u)
    symbol_map:
    - variable: u
      symbol: md_in_leader.peak.metadata_word_width
    latency:
      parameter_id: clock
      single_latency: True
      latency_column_name: critical_path_clock_latency
    energy:
    - expression: combinational_total_power+register_total_power+clock_network_total_power
      type: power
    area:
    - expression: Combinational_Area
      type: area
    generate_constraints: False
  implementations:
  - name: C
    taxonomic_instance_alias: C
    objective:
      actions:
      - name: fill
        energy: 1e-10*(@md_out_rw_thresh + @md_out_pr_thresh + @md_out_ww_thresh + %(test_fxn))
      - name: intersect
        energy: 2*(@md_out_rw_thresh + @md_out_pr_thresh + @md_out_ww_thresh )
      - name: gated_fill
        energy: 0
      - name: gated_intersect
        energy: 0
      area: 1e-10*(@md_out_rw_thresh + @md_out_pr_thresh + @md_out_ww_thresh + %(test_fxn) )
    constraints:
    - type: passthrough
      list:
      - port_in: md_in_leader
        port_out: md_out
        suffixes:
        - level.metadata_word_width
        - level.dense_data_rank_size
        - level.nodes_per_cycle
        - level.positions_per_cycle
        - level.metadata_read_width
    - type: values
      list:
      - symbol: md_in_leader.peak.metadata_word_width
        values:
        - 1
        - 8
        - 64
        - 256
      - symbol: md_out.peak.metadata_word_width
        values:
        - 1
        - 8
        - 64
        - 256
      - symbol: md_in_leader.peak.positions_per_cycle
        values:
        - 1
        - 8
        - 64
        - 256
      - symbol: md_out.peak.positions_per_cycle
        values:
        - 1
        - 8
        - 64
        - 256
      - symbol: md_in_leader.peak.metadata_read_width
        values:
        - 1
        - 8
        - 64
        - 256
      - symbol: md_out.peak.metadata_read_width
        values:
        - 1
        - 8
        - 64
        - 256
