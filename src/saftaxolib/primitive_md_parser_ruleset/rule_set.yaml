classtype: RuleSet
id: PrimitiveMetadataParserRuleSet

# Primitive MetadataParser validation rules

validation_rule_set:
  classtype: ValidationRuleSet
  id: PrimitiveMetadataParserValidationRuleSet
  validation_rules:

  # - Supported-instantiation validation rules

  - classtype: ValidationRule
    conditionally_evaluated_expression:
      classtype: FunctionReference
      id: assertion
      value: assertPrimitiveMetadataParserAttributesAreSupported
    id: AssertPrimitiveMetadataParserSupportedInstantiation
    predicate:
      classtype: FunctionReference
      id: predicate
      value: predicateIsPrimitiveMetadataParser

# Format uarch rewrite rules

rewrite_rule_set:
  classtype: RewriteRuleSet
  id: PrimitiveMetadataParserRewriteRuleSet
  rewrite_rules:

  # - Unknown attribute type from known interface type

  - classtype: RewriteRule
    conditionally_evaluated_expression:
      classtype: FunctionReference
      id: transform
      value: transformUnknownAttributeTypeFromInterfaceType
    id: TransformUnknownAttributeTypeFromInterfaceType
    predicate:
      classtype: FunctionReference
      id: predicate
      value: predicateIsPrimitiveMetadataParserHasUnknownAttributeTypeAndKnownInterfaceType   